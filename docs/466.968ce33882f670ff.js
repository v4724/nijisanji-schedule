"use strict";(self.webpackChunknijisanji_schedule=self.webpackChunknijisanji_schedule||[]).push([[466],{8693:(S,C,o)=>{o.d(C,{s:()=>y});var l=o(5e3);let y=(()=>{class c{constructor(f){this.el=f,this.el.nativeElement.style.overflowY="auto",this.checkLocation()}onScroll(){this.checkLocation()}checkLocation(){const f=this.el.nativeElement.scrollHeight,d=this.el.nativeElement.clientHeight,b=this.el.nativeElement.scrollTop;f!==d&&(b+d>=f-1?(this.el.nativeElement.style.borderTop="1px solid rgba(100,121,143,0.4)",this.el.nativeElement.style.borderBottom=""):0===b?(this.el.nativeElement.style.borderTop="",this.el.nativeElement.style.borderBottom="1px solid rgba(100,121,143,0.4)"):(this.el.nativeElement.style.borderTop="1px solid rgba(100,121,143,0.4)",this.el.nativeElement.style.borderBottom="1px solid rgba(100,121,143,0.4)"))}}return c.\u0275fac=function(f){return new(f||c)(l.Y36(l.SBq))},c.\u0275dir=l.lG2({type:c,selectors:[["","appScrollBorder",""]],hostBindings:function(f,d){1&f&&l.NdJ("scroll",function(){return d.onScroll()})}}),c})()},1818:(S,C,o)=>{function y(d){window.open(d,"_blank")}function c(d){return d.set("hour",0).set("minute",0).set("second",0).set("millisecond",0)}function p(d){return d.set("hour",23).set("minute",59).set("second",59)}function f(d){return d.filter((v,I,e)=>e.indexOf(v)===I)}o.d(C,{OX:()=>f,Yo:()=>y,et:()=>p,lo:()=>c})},9466:(S,C,o)=>{o.r(C),o.d(C,{VoiceButtonModule:()=>Y});var l=o(9808),y=o(1143),c=o(6967),p=o(4182),f=o(8929),d=o(6053),b=o(4594),v=o(7489),I=o(13),e=o(5e3),T=o(1025),M=o(7641),h=o(234),_=o(9613),r=o(2313),m=o(8693);function B(i,u){if(1&i&&(e.ynx(0),e._UZ(1,"iframe",27),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Udp("height","100%")("width","calc(100% - 1.5rem * 0.5)"),e.Q6J("src",t.ytIframeSource,e.uOi)}}function E(i,u){1&i&&(e.TgZ(0,"div",28),e._uU(1," choose one "),e.qZA())}function D(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw();return s.editVoiceButtonInfo(a,s.currentVoiceButton)}),e._UZ(1,"i",29),e.qZA()}2&i&&e.Udp("width","30px")("height","30px")}function Z(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"a",20),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw().$implicit;return e.oxw().editVoiceButtonInfo(a,s)}),e._UZ(1,"i",29),e.qZA()}}function A(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().changeVoiceButton(s)}),e._uU(1),e.YNc(2,Z,2,0,"a",31),e.ALo(3,"async"),e.qZA()}if(2&i){const t=u.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,2,n.adminService.editable$))}}function O(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().changeCurrStreamer(s)}),e._uU(1),e.qZA()}if(2&i){const t=u.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}let U=(()=>{class i{constructor(t,n,a,s,g){this.streamerService=t,this.streamGroupService=n,this.voiceButtonInfoService=a,this.adminService=s,this.sanitizer=g,this.streamers=[],this.voiceButtons=[],this.filterVoiceButtons=[],this.voiceButtonInfoVo=(0,b.m)(),this.keyword="",this.modelChanged=new f.xQ}ngOnInit(){(0,d.aj)([this.streamerService.streamerInfos$,this.streamGroupService.selectedGroup$]).subscribe(t=>{this.streamers=t[0],!this.currentStreamerInfo&&this.streamers.length&&this.changeCurrStreamer(this.streamers[0])}),this.subscription=this.modelChanged.pipe((0,I.b)(200)).subscribe(()=>{this.updateFilterVoiceButton()})}ngOnDestroy(){var t;null===(t=this.subscription)||void 0===t||t.unsubscribe()}playAgain(){!this.currentVoiceButton||this.changeVoiceButton(this.currentVoiceButton)}stopPlay(){}changeVoiceButton(t){this.currentVoiceButton=t,this.ytIframeSource=this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${t.videoId}?start=${t.start}&end=${t.end}&autoplay=1&rel=0`)}changeCurrStreamer(t){this.currentStreamerInfo=t,this.voiceButtonInfoService.getByStreamer(t.name,!1).subscribe(n=>{this.voiceButtons=v.cloneDeep(n),this.updateFilterVoiceButton()})}forceReloadVoiceButton(){!this.currentStreamerInfo||this.voiceButtonInfoService.getByStreamer(this.currentStreamerInfo.name,!0).subscribe(t=>{this.voiceButtons=v.cloneDeep(t),this.updateFilterVoiceButton()})}keywordChanged(){this.modelChanged.next()}updateFilterVoiceButton(){this.filterVoiceButtons=this.voiceButtons.filter(t=>!this.keyword.length||t.text.toLowerCase().includes(this.keyword.toLowerCase()))}editVoiceButtonInfo(t,n){t.stopPropagation(),this.adminService.openVoiceButtonInfoModal(!1,n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.O),e.Y36(M.S),e.Y36(h.T),e.Y36(_.l),e.Y36(r.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-voice-button"]],decls:35,vars:29,consts:[[1,"container","h-100","d-flex","flex-column"],[1,"fs-4","d-flex","align-items-center","justify-content-center","mt-2"],[1,"d-flex"],["type","button",1,"ms-auto","btn","btn-link","btn-sm","btn-rounded",3,"click"],[1,"voice-button-content","h-1","flex-grow-1"],[1,"row","h-100","w-100"],[1,"yt-iframe","col-12","col-lg-7","col-md-7","position-relative"],[4,"ngIf","ngIfElse"],["emptySourceTemplate",""],["appScrollBorder","",1,"voice-container","col-7","col-lg-3","col-md-3","py-2","h-100"],[1,"streamer-figure","d-flex","flex-wrap","align-items-center","justify-content-center"],[1,"playing-toolbar","d-flex"],["role","button",1,"d-flex","align-items-center","justify-content-center",3,"click"],[1,"fas","fa-redo-alt"],["class","d-flex align-items-center justify-content-center","role","button",3,"width","height","click",4,"ngIf"],[1,"fas","fa-times"],[1,"rounded-circle","m-2",3,"src"],[1,"voice-block-search","d-flex","align-items-center","justify-content-center"],["mdbInput","","type","text","id","formControlSearch",1,"form-control",3,"ngModel","ngModelChange"],["mdbLabel","","for","formControlSearch",1,"form-label"],["role","button",1,"ms-1",3,"click"],[1,"fas","fa-sync-alt"],[1,"voice-list","d-flex","flex-wrap"],["type","button","class","btn btn-link btn-sm btn-rounded d-flex align-items-center justify-content-center",3,"click",4,"ngFor","ngForOf"],["appScrollBorder","",1,"streamer-container","col-5","col-lg-2","col-md-2","pb-2","h-100"],[1,"fs-6","d-flex","align-items-center","justify-content-center","mt-2"],["type","button","class","ms-auto btn btn-link btn-sm btn-rounded",3,"click",4,"ngFor","ngForOf"],["id","ytplayer","type","text/html","frameborder","0","allow","autoplay",1,"position-absolute",3,"src"],[1,"d-flex","align-items-center","justify-content-center","h-100","w-100"],[1,"fas","fa-pen"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded","d-flex","align-items-center","justify-content-center",3,"click"],["class","ms-1","role","button",3,"click",4,"ngIf"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Voice Button "),e.qZA(),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return n.adminService.openVoiceButtonInfoModal(!0,n.voiceButtonInfoVo)}),e._uU(5," New "),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6),e.YNc(9,B,2,5,"ng-container",7),e.YNc(10,E,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(12,"div",9)(13,"div",10)(14,"div",11)(15,"a",12),e.NdJ("click",function(){return n.playAgain()}),e._UZ(16,"i",13),e.qZA(),e.YNc(17,D,2,4,"a",14),e.ALo(18,"async"),e.TgZ(19,"a",12),e.NdJ("click",function(){return n.ytIframeSource=void 0}),e._UZ(20,"i",15),e.qZA()(),e._UZ(21,"img",16),e.qZA(),e.TgZ(22,"div",17)(23,"mdb-form-control")(24,"input",18),e.NdJ("ngModelChange",function(s){return n.keyword=s})("ngModelChange",function(){return n.keywordChanged()}),e.qZA(),e.TgZ(25,"label",19),e._uU(26,"Keyword"),e.qZA()(),e.TgZ(27,"a",20),e.NdJ("click",function(){return n.forceReloadVoiceButton()}),e._UZ(28,"i",21),e.qZA()(),e.TgZ(29,"div",22),e.YNc(30,A,4,4,"button",23),e.qZA()(),e.TgZ(31,"div",24)(32,"div",25),e._uU(33," Streamer "),e.qZA(),e.YNc(34,O,2,1,"button",26),e.qZA()()()()),2&t){const a=e.MAs(11);e.xp6(7),e.Udp("border","solid 1px"),e.xp6(1),e.Udp("min-height","300px"),e.xp6(1),e.Q6J("ngIf",n.ytIframeSource)("ngIfElse",a),e.xp6(6),e.Udp("width","30px")("height","30px"),e.ekj("disabled",!n.ytIframeSource),e.xp6(2),e.Q6J("ngIf",e.lcZ(18,27,n.currentVoiceButton&&n.adminService.editable$)),e.xp6(2),e.Udp("width","30px")("height","30px"),e.ekj("disabled",!n.ytIframeSource),e.xp6(2),e.Udp("width","100px")("height","100px"),e.Q6J("src",null==n.currentStreamerInfo?null:n.currentStreamerInfo.img,e.LSH),e.xp6(3),e.Q6J("ngModel",n.keyword),e.xp6(6),e.Q6J("ngForOf",n.filterVoiceButtons),e.xp6(4),e.Q6J("ngForOf",n.streamers)}},directives:[l.O5,m.s,c.Af,p.Fj,c.VP,p.JJ,p.On,c.o8,l.sg],pipes:[l.Ov],styles:["@media (max-width: 767px){.voice-container[_ngcontent-%COMP%], .streamer-container[_ngcontent-%COMP%]{max-height:calc(100% - 300px)}}.voice-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:gold}.voice-button-content[_ngcontent-%COMP%]{padding-left:.75rem}"]}),i})();var k=o(3416),V=o(3421),x=o(6912),w=o(3307);function J(i,u){if(1&i&&(e.ynx(0),e._UZ(1,"iframe",21),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Udp("height","100%")("width","100%"),e.Q6J("src",t.ytIframeSource,e.uOi)}}function N(i,u){1&i&&(e.TgZ(0,"div",22),e._uU(1," Enter a valid Start, End and Video Id. "),e.qZA())}function P(i,u){1&i&&(e.TgZ(0,"mdb-error"),e._uU(1,"invalid"),e.qZA())}function $(i,u){if(1&i&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&i){const t=u.$implicit;e.Q6J("value",t.name),e.xp6(1),e.Oqu(t.name)}}let j=(()=>{class i{constructor(t,n){this.streamerService=t,this.sanitizer=n,this.item=(0,b.m)(),this.isNew=!0,this.editItem=(0,b.m)(),this.streamerKeyword="",this.streamers=[],this.filterStreamers=[],this.myControl=new p.NI(""),this.start="00:00:00",this.end="00:00:00"}ngOnInit(){this.streamerService.streamerInfos$.subscribe(t=>{this.streamers=t,this.streamerKeywordChanged()})}ngOnChanges(t){t.item.firstChange&&!t.isNew.currentValue?(this.editItem=v.cloneDeep(t.item.currentValue),this.isVideoValid&&this.changeYtInfo(!1),this.start=this.toYTTime(this.editItem.start),this.end=this.toYTTime(this.editItem.end)):t.isNew.currentValue&&(this.startChanged(),this.endChanged())}get editedItem(){return this.editItem}get isVideoValid(){var t;return this.editItem.start>=1&&this.editItem.end>this.editItem.start&&!!(null===(t=this.editItem)||void 0===t?void 0:t.videoId)}get isValidStreamer(){return!!this.streamers.find(n=>n.name===this.editItem.streamer)}get isValid(){var t;return this.isVideoValid&&this.isValidStreamer&&!!(null===(t=this.editItem)||void 0===t?void 0:t.text)}changeYtInfo(t){this.ytIframeSource=this.isVideoValid?this.sanitizer.bypassSecurityTrustResourceUrl(`https://www.youtube.com/embed/${this.editItem.videoId}?start=${this.editItem.start}&end=${this.editItem.end}&autoplay=${t?1:0}&rel=0`):""}minusStart(){this.editItem.start-=1,this.start=this.toYTTime(this.editItem.start)}plusStart(){this.editItem.start+=1,this.start=this.toYTTime(this.editItem.start)}startChanged(){this.editItem.start=this.fromYTTime(this.start)}minusEnd(){this.editItem.end-=1,this.end=this.toYTTime(this.editItem.end)}plusEnd(){this.editItem.end+=1,this.end=this.toYTTime(this.editItem.end)}endChanged(){this.editItem.end=this.fromYTTime(this.end)}toYTTime(t){const n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=t%3600%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}fromYTTime(t){const n=t.split(":");return 3600*Number.parseInt(n[0])+60*Number.parseInt(n[1])+Number.parseInt(n[2])}streamerKeywordChanged(t){const n=this.editItem.streamer.toUpperCase();this.filterStreamers=this.streamers.filter(a=>!n.length||a.name.toUpperCase().includes(n))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.O),e.Y36(r.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-voice-detail"]],inputs:{item:"item",isNew:"isNew"},features:[e.TTD],decls:42,vars:16,consts:[[1,"d-flex","flex-column","gap-2"],[1,"yt-iframe","d-flex","align-items-center","justify-content-center","position-relative"],[4,"ngIf","ngIfElse"],["emptySourceTemplate",""],[1,"d-flex","align-items-center","justify-content-center"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded",3,"disabled","click"],["mdbInput","","type","text","id","formControlTitle","placeholder","00:00:00",1,"form-control",3,"ngModel","ngModelChange"],["mdbLabel","","for","formControlTitle",1,"form-label"],["type","button",1,"btn","btn-link","btn-sm","btn-rounded",3,"click"],["mdbInput","","type","text","id","formControlChannelId","placeholder","00:00:00",1,"form-control",3,"ngModel","ngModelChange"],["mdbLabel","","for","formControlChannelId",1,"form-label"],["mdbInput","","type","text","id","formControlYoutubeLink",1,"form-control",3,"ngModel","ngModelChange"],["mdbLabel","","for","formControlYoutubeLink",1,"form-label"],["mdbInput","","type","text","id","formControlTwitterLink",1,"form-control",3,"ngModel","ngModelChange"],["mdbLabel","","for","formControlTwitterLink",1,"form-label"],[1,"mb-2"],["matInput","","mdbInput","","type","text","id","formControlTwitchLink",1,"form-control",3,"formControl","matAutocomplete","ngModel","ngModelChange"],["mdbLabel","","for","formControlTwitchLink",1,"form-label"],[4,"ngIf"],["auto","matAutocomplete"],["class","streamer-autocomplete",3,"value",4,"ngFor","ngForOf"],["id","ytplayer","type","text/html","frameborder","0","allow","autoplay",1,"position-absolute",3,"src"],[1,"d-flex","align-items-center","justify-content-center","h-100","w-100"],[1,"streamer-autocomplete",3,"value"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,J,2,5,"ng-container",2),e.YNc(3,N,2,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return n.changeYtInfo(!0)}),e._uU(7," preview "),e.qZA()(),e.TgZ(8,"div",4)(9,"button",5),e.NdJ("click",function(){return n.minusStart()}),e._uU(10," < "),e.qZA(),e.TgZ(11,"mdb-form-control")(12,"input",6),e.NdJ("ngModelChange",function(g){return n.start=g})("ngModelChange",function(){return n.startChanged()}),e.qZA(),e.TgZ(13,"label",7),e._uU(14,"Start"),e.qZA()(),e.TgZ(15,"button",8),e.NdJ("click",function(){return n.plusStart()}),e._uU(16," > "),e.qZA()(),e.TgZ(17,"div",4)(18,"button",5),e.NdJ("click",function(){return n.minusEnd()}),e._uU(19," < "),e.qZA(),e.TgZ(20,"mdb-form-control")(21,"input",9),e.NdJ("ngModelChange",function(g){return n.end=g})("ngModelChange",function(){return n.endChanged()}),e.qZA(),e.TgZ(22,"label",10),e._uU(23,"End"),e.qZA()(),e.TgZ(24,"button",8),e.NdJ("click",function(){return n.plusEnd()}),e._uU(25," > "),e.qZA()(),e.TgZ(26,"mdb-form-control")(27,"input",11),e.NdJ("ngModelChange",function(g){return n.editItem.videoId=g}),e.qZA(),e.TgZ(28,"label",12),e._uU(29,"Video Id"),e.qZA()(),e.TgZ(30,"mdb-form-control")(31,"input",13),e.NdJ("ngModelChange",function(g){return n.editItem.text=g}),e.qZA(),e.TgZ(32,"label",14),e._uU(33,"Text"),e.qZA()(),e.TgZ(34,"mdb-form-control",15)(35,"input",16),e.NdJ("ngModelChange",function(g){return n.editItem.streamer=g})("ngModelChange",function(){e.CHM(a);const g=e.MAs(40);return n.streamerKeywordChanged(g)}),e.qZA(),e.TgZ(36,"label",17),e._uU(37,"Streamer"),e.qZA(),e.YNc(38,P,2,0,"mdb-error",18),e.TgZ(39,"mat-autocomplete",null,19),e.YNc(41,$,2,2,"mat-option",20),e.qZA()()()}if(2&t){const a=e.MAs(4),s=e.MAs(40);e.xp6(1),e.Udp("min-height","300px"),e.xp6(1),e.Q6J("ngIf",n.ytIframeSource)("ngIfElse",a),e.xp6(4),e.Q6J("disabled",!n.isVideoValid),e.xp6(3),e.Q6J("disabled",n.editItem.start<=1),e.xp6(3),e.Q6J("ngModel",n.start),e.xp6(6),e.Q6J("disabled",n.editItem.end<=1),e.xp6(3),e.Q6J("ngModel",n.end),e.xp6(6),e.Q6J("ngModel",n.editItem.videoId),e.xp6(4),e.Q6J("ngModel",n.editItem.text),e.xp6(4),e.Q6J("formControl",n.myControl)("matAutocomplete",s)("ngModel",n.editItem.streamer),e.xp6(3),e.Q6J("ngIf",n.editItem.streamer.length&&!n.isValidStreamer),e.xp6(3),e.Q6J("ngForOf",n.filterStreamers)}},directives:[l.O5,c.Af,p.Fj,c.VP,p.JJ,p.On,c.o8,V.ZL,p.oH,x.$J,V.XC,l.sg,w.ey],styles:[".cdk-overlay-pane[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;border:solid 1px}.streamer-autocomplete[_ngcontent-%COMP%]{background-color:#f3f3f3d9;height:2rem}.streamer-autocomplete[_ngcontent-%COMP%]:hover{background-color:#edecec}"]}),i})();var R=o(7810);const L=[{path:"",component:U,children:[]}];let Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[l.ez,y.Bz.forChild(L),c.ND,p.u5,V.Bb,x.ud,p.UX,k.Z]]}),i})();e.B6R(R.q,[l.O5,j],[])},7641:(S,C,o)=>{o.d(C,{S:()=>b});var l=o(591),y=o(1818),c=o(7489),f=o(5e3),d=o(1025);let b=(()=>{class v{constructor(e){this.streamerInfoService=e,this.group$=new l.X([]),this.selectedGroup$=new l.X([]),e.streamerInfos$.subscribe(T=>{const M=(0,y.OX)(T.map(r=>r.group)),h=this.group$.getValue().length,_=this.selectedGroup$.getValue().length;0===h&&0===_&&this.selectedGroup$.next((0,c.cloneDeep)(M)),this.group$.next(M)})}}return v.\u0275fac=function(e){return new(e||v)(f.LFG(d.O))},v.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},6912:(S,C,o)=>{o.d(C,{$J:()=>I,ud:()=>M});var l=o(5e3),y=o(8929),c=o(3753),p=o(7625),f=o(9808);const d=["*"];let v=0,I=(()=>{class h{constructor(r,m){this._elementRef=r,this.renderer=m,this.id="mdb-error-"+v++,this.errorMsg=!0,this.messageId=this.id,this._destroy$=new y.xQ}_getClosestEl(r,m){for(;r&&r!==document;r=r.parentNode)if(r.matches&&r.matches(m))return r;return null}ngOnInit(){const r=this._getClosestEl(this._elementRef.nativeElement,"textarea");if(r){let m=r.offsetHeight+4+"px";this.renderer.setStyle(this._elementRef.nativeElement,"top",m),(0,c.R)(r,"keyup").pipe((0,p.R)(this._destroy$)).subscribe(()=>{m=r.offsetHeight+4+"px",this.renderer.setStyle(this._elementRef.nativeElement,"top",m)})}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}return h.\u0275fac=function(r){return new(r||h)(l.Y36(l.SBq),l.Y36(l.Qsj))},h.\u0275cmp=l.Xpm({type:h,selectors:[["mdb-error"]],hostVars:3,hostBindings:function(r,m){2&r&&(l.uIk("id",m.messageId),l.ekj("error-message",m.errorMsg))},inputs:{id:"id"},ngContentSelectors:d,decls:1,vars:0,template:function(r,m){1&r&&(l.F$t(),l.Hsn(0))},encapsulation:2}),h})(),M=(()=>{class h{}return h.\u0275fac=function(r){return new(r||h)},h.\u0275mod=l.oAB({type:h}),h.\u0275inj=l.cJS({imports:[[f.ez]]}),h})()}}]);